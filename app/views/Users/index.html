#{extends 'main.html' /}
#{set title:'Home' /}

#{if users}
<div class="older-posts">
    <h3>Older posts <span class="from">from this blog</span></h3>

    #{list items:users, as:'user'}
        <div class="post">
            <h2 class="post-title">
                <a href="@{Users.show(user.id)}">${user.login}</a>
            </h2>
            <div class="post-metadata">
                    <span class="post-author">
                        by ${user.email}
                    </span>
                <span class="post-date">
                        ${user.createdAt.format('dd MMM yy')}
                    </span>
                <div class="post-comments">
                ${user.books.size() ?: 'no'}
                    comment${user.books.size().pluralize()}
                    #{if user.books}
                        - latest by ${user.books[-1].name}
                    #{/if}
                </div>
            </div>
        </div>
    #{/list}
</div>

#{/if}

#{else}
<div class="empty">
    There is currently nothing to read here.
</div>
#{/else}